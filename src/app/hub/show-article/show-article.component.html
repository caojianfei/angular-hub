<section>
    <div class="row">
        <div class="col-md-9" *ngIf="article$ | async as article">
            <div class="background-white p-5 border">

                <div class="text-center mb-5">
                    <h1 class="mb-3">{{ article.title }}</h1>
                    <div class="">
                        <span class="mr-2">
                            <i class="fa fa-clock-o mr-1 font-small" aria-hidden="true"></i>
                            <span class="text-color-second number-small  pr-1">{{article.created_at}}</span>
                        </span>
                        <span class="mr-2">
                            <i class="fa fa-thumbs-o-up mr-1 font-small" aria-hidden="true"></i>
                            <span class="text-color-second number-small  pr-1">{{article.like_count}}</span>
                        </span>
                        <span class="mr-2">
                            <i class="fa fa-comment-o mr-1 font-small" aria-hidden="true"></i>
                            <span class="text-color-second number-small pr-1">{{ article.replay_count }}</span>
                        </span>

                        <span class="mr-2">
                            <i class="fa fa-eye mr-1 font-small" aria-hidden="true"></i>
                            <span class="text-color-second number-small">{{ article.view_count }}</span>
                        </span>
                    </div>
                </div>

                <div [appHtml]="article.content"></div>

            </div>

            <!-- 回复列表 -->
            <div class="comment-list mt-4 background-white">

                <div class="px-4 py-1 border-bottom">
                    <span class="mr-1">{{ article.comments?.data.length ? article.comments?.data.length : '0' }}</span>
                    <span>条回复</span>
                </div>

                <div *ngIf="article.comments.data">
                    <div *ngFor="let comment of article.comments.data" class="comment-item border-bottom p-4">
                        <div class="media">
                            <img class="mr-3 rounded-circle" style="width: 45px;" src="{{ comment.user.avatar?.url ? comment.user.avatar.url : 'assets/images/avatar.jpg' }}"
                                alt="Generic placeholder image">
                            <div class="media-body">
                                <div class="mb-2">
                                    <span class="">Jeffrey</span>
                                    <span class="float-right cursor-pointer" (click)="displayReplayDialog(comment.id)">
                                        <i class="fa fa-reply text-color-second" aria-hidden="true"></i>
                                    </span>
                                    <span class="d-block font-small text-color-second ">{{ comment.created_at }}</span>
                                </div>

                                <div>
                                    {{ comment.content }}
                                </div>

                                <div *ngIf="comment.replayComment" class="comment-replay p-1 mt-2 border rounded">
                                    <a href="#">@{{comment.replayComment.user.name}}：</a>{{ comment.replayComment.content }}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
        <div class="col-md-3">
            <div class="background-white p-5">fsdfsf</div>
        </div>
    </div>
</section>


<p-dialog header="发表回复" [(visible)]="displayReplay">
    <app-replay-article [replayArticle]="replayArticle" [replayComment]="replayComment"></app-replay-article>
</p-dialog>